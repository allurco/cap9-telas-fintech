<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="login.title">Vida Rica - Login</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">

</head>
<body class="d-flex flex-column justify-content-center align-items-center body-login">

    <div id="main-container" style="width: 100%" class="d-flex flex-column justify-content-center align-items-center">
        <img src="./images/logo.png" class="mb-5" />
        <form action="password.html" method="GET" class="text-center d-flex flex-column align-items-center w-100" style="max-width: 320px;" id="loginForm" novalidate>
            <div class="mb-2 w-100">
                <input type="text" class="form-control form-control-lg" id="email" name="email" required data-i18n-placeholder="login.emailPhonePlaceholder" placeholder="TELEFONE/EMAIL" autocomplete="username">
                <div class="invalid-feedback text-start" data-i18n="login.invalidEmail">Formato de e-mail inválido</div>
                <div class="invalid-feedback text-start" data-i18n="login.invalidPhone">Formato de telefone inválido</div>
            </div>

            <div class="d-flex align-items-center gap-2 w-100 mb-4">
                <hr class="login-divider flex-grow-1" />
                <span class="ou px-2" data-i18n="login.or">OU</span>
                <hr class="login-divider flex-grow-1" />
            </div>
            
            <div class="social-buttons d-flex align-items-center justify-content-between w-100 mb-4">
                <a href="#" class="social-btn" data-i18n-title="login.loginWithGoogle" title="Login com Google">
                    <img src="./images/google-button.png" alt="Google" class="social-icon">
                </a>
                <a href="#" class="social-btn" data-i18n-title="login.loginWithLinkedIn" title="Login com LinkedIn">
                    <img src="./images/linkedin-button.png" alt="LinkedIn" class="social-icon">
                </a>
                <a href="#" class="social-btn" data-i18n-title="login.loginWithFacebook" title="Login com Facebook">
                    <img src="./images/facebook-button.png" alt="Facebook" class="social-icon">
                </a>
            </div>
            
            <button type="submit" class="btn login w-100" data-i18n="login.validateAccess">VALIDAR ACESSO</button>
        </form>
    </div>
     
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    
    <!-- Translation System -->
    <script src="translations.js"></script>
    <script src="language.js"></script>
    <script>
        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function() {
            const savedLanguage = localStorage.getItem('lang') || 'en';
            if (typeof applyTranslations === 'function') {
                applyTranslations(savedLanguage);
            }
            
            // Form validation
            const loginForm = document.getElementById('loginForm');
            const emailInput = document.getElementById('email');
            
            loginForm.addEventListener('submit', function(event) {
                event.preventDefault();
                
                // Reset previous validation states
                emailInput.classList.remove('is-invalid');
                const invalidEmailFeedback = document.querySelector('[data-i18n="login.invalidEmail"]');
                const invalidPhoneFeedback = document.querySelector('[data-i18n="login.invalidPhone"]');
                invalidEmailFeedback.style.display = 'none';
                invalidPhoneFeedback.style.display = 'none';
                
                const value = emailInput.value.trim();
                
                // Email validation regex
                const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                
                // Phone validation regex (Brazilian format: +55 XX XXXXX-XXXX or just numbers)
                const phoneRegex = /^(\+55)?\s*\(?[1-9]{2}\)?\s*(?:9\s*)?[0-9]{4}[\s-]?[0-9]{4}$/;
                
                // Clean phone number format (only digits)
                const digitsOnlyRegex = /^[0-9]{10,11}$/;
                
                const isValidEmail = emailRegex.test(value);
                const isValidPhone = phoneRegex.test(value) || digitsOnlyRegex.test(value);
                
                if (isValidEmail || isValidPhone) {
                    // Valid format, proceed with form submission
                    loginForm.submit();
                } else {
                    // Invalid format, show appropriate error
                    emailInput.classList.add('is-invalid');
                    
                    // If it looks more like an email attempt, show email error
                    if (value.includes('@')) {
                        invalidEmailFeedback.style.display = 'block';
                        invalidPhoneFeedback.style.display = 'none';
                    } else {
                        // Otherwise show phone error
                        invalidPhoneFeedback.style.display = 'block';
                        invalidEmailFeedback.style.display = 'none';
                    }
                }
            });
        });
    </script>
</body>
</html>